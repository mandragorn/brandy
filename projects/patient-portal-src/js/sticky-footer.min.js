(function(){if($(".grail").css("display")=="table"){var o=$(window);var t=$("footer").height();var s=parseInt($(".grail").css("padding-top"))+$(".footer-center").height();var e=function(){var e="none";$(".message").each(function(){if($(this).find(".message-footer").length){if(e=="none"&&$(this).position().top+$(this).height()+s>o.scrollTop()+o.height()&&$(this).position().top+$(this).find("h1").height()+t<o.height()+o.scrollTop()){$(this).find(".message-footer").addClass("message-footer-fixed");e="block";if(o.scrollTop()+o.height()-$(this).position().top-$(this).find("h1").height()-s<15){var i=o.scrollTop()+o.height()-$(this).position().top-$(this).find("h1").height()-s-15;$(this).find(".message-footer").css("margin-bottom",i+"px");$(".footer-center").css("bottom",i+"px")}else{$(this).find(".message-footer").css("margin-bottom",0);$(".footer-center").css("bottom",0)}}else{$(this).find(".message-footer").css("margin-bottom",0);$(this).find(".message-footer").removeClass("message-footer-fixed")}}});$(".footer-center").css("display",e)};$(function(){o.scroll(e);e()})}})();
